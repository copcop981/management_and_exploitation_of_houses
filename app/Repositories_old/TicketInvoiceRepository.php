<?php

namespace App\Repositories;

use Carbon\Carbon;
use Illuminate\Http\Request;
use App\Models_12345\TicketObtained;
use App\Http\Requests\RequestResetPass;
use App\Models_12345\BillIssued;
use App\Models_12345\TicketType;

class TicketInvoiceRepository extends AbstractRepository
{
    public function getModel()
    {
        return BillIssued::class;
    }

    public function searchTicket($ticketTypeId, $invoiceStatusId, $fromDate, $addDate) {
        $query = TicketType::where('id', $ticketTypeId);
        $name = $query->value('type');
        $price = $query->value('price');
        $ticketInvoices = $this->model->where('name', $name)
                                        ->orWhere('price', $price)
                                        ->orWhere('invoice_status_id', $invoiceStatusId)
                                        ->orWhereBetween('issuing_time', [$fromDate, $addDate->addDay()]);
        return $ticketInvoices;
    }

    public function getListPaginate($model, $limit) {
        $list = $model->paginate($limit);
        return $list;
    }

    public function getList($model) {
        $list = $model->all();
        return $list;
    }
}
