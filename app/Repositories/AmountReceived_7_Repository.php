<?php

namespace App\Repositories;

use App\Models\AmountReceived_7_2023;
use Illuminate\Http\Request;

class AmountReceived_7_Repository extends AbstractRepository
{
    public function getModel()
    {
        return AmountReceived_7_2023::class;
   }

   public function getListByParams($params, $paradigm_id) {

        $apartments = $this->model->select()->orderBy('id','DESC');

        $apartments->where('paradigm_id', $paradigm_id);

        if (isset($params['dormitory_id']) && $params['dormitory_id'] != 0) {

            $apartments->where('dormitory_id', $params['dormitory_id']);

        }

        if (isset($params['apartment_id']) && $params['apartment_id'] != '') {

            $apartments->where('apartment_id', $params['apartment_id']);

        }

        if (isset($params['account_id']) && $params['account_id'] != '') {

            $apartments->where('account_id', $params['account_id']);

        }

        if (isset($params['type_price_id']) && $params['type_price_id'] != '') {

            $apartments->where('type_price_id', $params['type_price_id']);

        }

        if (isset($params['room_id']) && $params['room_id'] != '') {

            $apartments->where('room_id', $params['room_id']);

        }

        if (isset($params['send_accountant']) && $params['send_accountant'] != '') {

            $apartments->where('send_accountant', $params['send_accountant']);

        }

        if (isset($params['number_bill_number']) && $params['number_bill_number'] != '') {

            $apartments->where('number_bill_number', $params['number_bill_number']);

        }

        if (isset($params['number_bill_string']) && $params['number_bill_string'] != '') {

            $apartments->where('number_bill_string', $params['number_bill_string']);

        }

        if (isset($params['status']) && $params['status'] != '') {

            $apartments->where('status', $params['status']);

        }

        if (isset($params['fullname']) && $params['fullname'] != '') {

            $apartments->where('fullname', 'like' ,'%'.$params['fullname'].'%');

        }

        if (isset($params['date_start']) && $params['date_start'] != '') {

            $apartments->whereDate('created_at', '>=' , $params['date_start']);

        }

        if (isset($params['date_end']) && $params['date_end'] != '') {

            $apartments->whereDate('created_at', '<=' , $params['date_end']);

        }

        if (isset($params['paginate']) && $params['paginate'] > 0){

            $apartments->paginate($params['paginate']);

        }

        return $apartments->paginate(10);

    }

}