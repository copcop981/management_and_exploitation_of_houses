<?php

namespace App\Repositories;

use App\Models\Apartment;

class ApartmentRepository extends AbstractRepository
{
    public function getModel()
    {
        return Apartment::class;
    }

    public function getApartmentByName($name) {

        return $this->model->where('name', $name)->first();

    }

    public function getApartmentByParams($params, $paradigm_id) {

        $apartments = $this->model->select()->orderBy('id','DESC');

        $apartments->where('paradigm_id', $paradigm_id);

        if (isset($params['name']) && $params['name'] !== null) {

            $apartments->where('name', 'like', '%'.$params['name'].'%');

        }

        if (isset($params['paginate']) && $params['paginate'] > 0){

            $apartments->paginate($params['paginate']);

        }

        return $apartments->paginate(10);

    }

    public function deleteByIdByParadigmID($id, $paradigm_id) {

        return $this->model->where('id', $id)->where('paradigm_id', $paradigm_id)->delete();

    }

    public function getApartmentByParadigmID($paradigm_id) {

        return $this->model->where('paradigm_id', $paradigm_id)->get();

    }
}
