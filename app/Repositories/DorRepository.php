<?php

namespace App\Repositories;

use App\Models\Dormitory;

class DorRepository extends AbstractRepository
{
    public function getModel()
    {
        return Dormitory::class;
    }

    public function getDorByName($name) {

        return $this->model->where('name', $name)->first();

    }

    public function getDorByParams($params, $paradigm_id) {

        $dors = $this->model->select()->orderBy('id','DESC');

        $dors->where('paradigm_id', $paradigm_id);

        if (isset($params['name']) && $params['name'] !== null) {

            $dors->where('name', 'like', '%'.$params['name'].'%');

        }

        if (isset($params['paginate']) && $params['paginate'] > 0){

            $dors->paginate($params['paginate']);

        }

        return $dors->paginate(10);

    }

    public function deleteByIdByParadigmID($id, $paradigm_id) {

        return $this->model->where('id', $id)->where('paradigm_id', $paradigm_id)->delete();

    }

    public function getDorByParadigmID($paradigm_id) {

        return $this->model->where('paradigm_id', $paradigm_id)->get();

    }
}
