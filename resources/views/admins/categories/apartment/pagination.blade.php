<div class="mt-2">
    <table class="table table-hover table-dark table-striped mb-1">
        <thead>
            <tr>
                <th scope="col" style="width: 30px !important;">
                    <input type="checkbox" name="" id="check_all" style="cursor: pointer;">
                </th>
                <th scope="col" style="width: 50px !important;">STT</th>
                <th scope="col" style="width: 180px !important;">Tên chung cư</th>
                <th scope="col" style="width: 120px !important;">Nhà</th>
                <th scope="col" style="width: 300px !important;">Căn hộ</th>
                <th scope="col" class="text-center">Xem</th>
                <th scope="col" class="text-center">Sửa</th>
                <th scope="col" class="text-center">Xóa</th>
            </tr>
        </thead>
        <tbody id="list_apartment_table_data">
            @php($sn = ($apartments->perPage() * ($apartments->currentPage() - 1)) + 1)
            @if ($apartments !== null && count($apartments) > 0)
                @foreach ($apartments as $apartment)
                    <tr id="r_id_{{ $apartment->id }}">
                        <td scope="row">
                            <input type="checkbox" name="ids" class="check_box" id="" value="{{ $apartment->id }}" style="cursor: pointer;">
                        </td>
                        <td scope="row">{{ $sn++ }}</td>
                        <td scope="row">{{ $apartment->name }}</td>
                        <td scope="row">
                            <p class="list_block_name m-0">
                                @if ($blocks !== null && count($blocks) > 0)
                                    @foreach ($blocks as $block)
                                        @if ($block->apartment_id === $apartment->id)
                                           {{ $block->name.', ' }}
                                        @endif
                                    @endforeach
                                @endif
                            </p>
                        </td>
                        <td scope="row">
                            <p class="list_room_name m-0">
                                @if ($blocks !== null && count($blocks) > 0)
                                    @foreach ($blocks as $block)
                                        @if ($block->apartment_id === $apartment->id)
                                            @if ($floors !== null && count($floors) > 0)
                                                @foreach ($floors as $floor)
                                                    @if ($floor->block_id === $block->id && $floor->apartment_id === $apartment->id)
                                                        @if ($rooms !== null && count($rooms) > 0)
                                                            @foreach ($rooms as $room)
                                                                @if ($room->floor_id === $floor->id && $room->block_id === $block->id && $room->apartment_id === $apartment->id)
                                                                    {{ $room->floor->block->name.$room->floor->name.$room->name.', ' }}
                                                                @endif
                                                            @endforeach
                                                        @endif
                                                    @endif
                                                @endforeach
                                            @endif
                                        @endif
                                    @endforeach
                                @endif
                            </p>
                        </td>
                        <td scope="row">
                            <center>
                                <button type="button" value="{{ $apartment->id }}" class="btn btn-outline-primary btn-sm" id="show_apartment_btn">
                                    <i class="fa-regular fa-eye"></i>
                                </button>
                            </center>
                        </td>
                        <td scope="row">
                            <center>
                                <button type="button" value="{{ $apartment->id }}" class="btn btn-outline-success btn-sm" id="edit_apartment_btn">
                                    <i class="fa-solid fa-pen"></i>
                                </button>
                            </center>
                        </td>
                        <td scope="row">
                            <center>
                                <button type="button" value="{{ $apartment->id }}" class="btn btn-outline-danger btn-sm" id="delete_apartment_btn">
                                    <i class="fa-solid fa-trash"></i>
                                </button>
                            </center>
                        </td>
                    </tr>
                @endforeach
            @endif
        </tbody>
    </table>
</div>

<div class="mt-2" id="links">
    @if(count($apartments) > 0)
        <span style="font-size: 15px;"><strong>Hiển thị {{ $apartments->firstItem() }} - {{ $apartments->lastItem() }} / Tổng {{ $apartments->total() }}</strong></span>
    
        <nav aria-label="Page navigation example">
            <ul class="pagination justify-content-center">
                <li class="page-item {{ $apartments->currentPage() == 1 ? 'disabled' : '' }}">
                    <a href="?page=1" class="page-link">Đầu trang</a>
                </li>
                @if (isset($apartments) && count($apartments) > 0)
                    {{ $apartments->render('helpers.paginate') }}
                @endif
                <li class="page-item {{ $apartments->currentPage() == $apartments->lastPage() ? 'disabled' : '' }}">
                    <a href="?page={{ $apartments->lastPage() }}" class="page-link">Cuối trang</a>
                </li>
            </ul>
        </nav>
    @endif
</div>
