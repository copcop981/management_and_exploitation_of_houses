<div class="mt-2 table-wrapper">
    <table class="table table-hover table-dark table-striped mb-1">
        <thead>
            <th scope="col">STT</th>
            <th scope="col">Loại vé</th>
            <th scope="col">Giá vé</th>
            <th scope="col">Ngày xuất hóa đơn</th>
            <th scope="col">Trạng thái hóa đơn</th>
            <th scope="col">Mẫu số</th>
            <th scope="col">Ký hiệu</th>
            <th scope="col">Fkey / Mã khách hàng</th>
            <th scope="col" class="text-center">Thay thế</th>
            <th scope="col" class="text-center">Điều chỉnh</th>
            <th scope="col" class="text-center">Hủy</th>
        </thead>
        <tbody>
            @php($sn = ($ticketInvoices->perPage() * ($ticketInvoices->currentPage() - 1)) + 1)
            @if ($ticketInvoices !== null && count($ticketInvoices) > 0)
                @foreach ($ticketInvoices as $ticketInvoice)
                    <tr>
                        <td scope="row">{{ $sn++ }}</td>
                        <td scope="row" class="text-uppercase">{{ $ticketInvoice->name }}</td>
                        <td scope="row">{{ number_format($ticketInvoice->price, 0, ',', '.').' VND' }}</td>
                        <td scope="row">{{ $ticketInvoice->issuing_time }}</td>
                        <td scope="row">
                            @if ($ticketInvoice->invoiceStatus != null)
                                <span class="badge 
                                    @if ($ticketInvoice->invoice_status_id == 1 || $ticketInvoice->invoice_status_id == 3 || $ticketInvoice->invoice_status_id == 4)
                                        badge-success
                                    @elseif ($ticketInvoice->invoice_status_id == 2)
                                        badge-warning
                                    @else
                                        badge-danger
                                    @endif">
                                    {{ $ticketInvoice->invoiceStatus->status }}
                                </span>
                            @else
                                <span class="badge badge-danger">Không xác định</span>
                            @endif
                        </td>
                        <td scope="row">{{ $ticketInvoice->pattern }}</td>
                        <td scope="row" class="text-uppercase">{{ $ticketInvoice->serial }}</td>
                        <td scope="row">{{ $ticketInvoice->fkey }}</td>
                        <td scope="row">
                            <center>
                                <button type="button" value="{{ $ticketInvoice->id }}" class="btn btn-outline-primary btn-sm" id="btn_replace" {{ $ticketInvoice->invoice_status_id == 2 || $ticketInvoice->invoice_status_id == 3 || $ticketInvoice->invoice_status_id == 5 ? 'disabled' : '' }}>
                                    <i class="fa-solid fa-copy"></i>
                                </button>
                            </center>
                        </td>
                        <td scope="row">
                            <center>
                                <button type="button" value="{{ $ticketInvoice->id }}" class="btn btn-outline-success btn-sm" id="btn_adjust" {{ $ticketInvoice->invoice_status_id == 2 || $ticketInvoice->invoice_status_id == 3 || $ticketInvoice->invoice_status_id == 4 || $ticketInvoice->invoice_status_id == 5 ? 'disabled' : '' }}>
                                    <i class="fa-solid fa-pen"></i>
                                </button>
                            </center>
                        </td>
                        <td scope="row">
                            <center>
                                <button type="button" value="{{ $ticketInvoice->id }}" class="btn btn-outline-danger btn-sm" id="btn_cancel" {{ $ticketInvoice->invoice_status_id == 2 || $ticketInvoice->invoice_status_id == 3 || $ticketInvoice->invoice_status_id == 5 ? 'disabled' : '' }}>
                                    <i class="fa-regular fa-circle-xmark"></i>
                                </button>
                            </center>
                        </td>
                    </tr>  
                @endforeach
            @endif
        </tbody>
    </table>
</div>

<div class="mt-2" id="links">
    @if(count($ticketInvoices) > 0)
        <span style="font-size: 15px;"><strong>Hiển thị {{ $ticketInvoices->firstItem() }} - {{ $ticketInvoices->lastItem() }} / Tổng {{ $ticketInvoices->total() }}</strong></span>
    
        <nav aria-label="Page navigation example">
            <ul class="pagination justify-content-center">
                <li class="page-item {{ $ticketInvoices->currentPage() == 1 ? 'disabled' : '' }}">
                    <a href="?page=1" class="page-link">Đầu trang</a>
                </li>
                @if (isset($ticketInvoices) && count($ticketInvoices) > 0)
                    {{ $ticketInvoices->render('helpers.paginate') }}
                @endif
                <li class="page-item {{ $ticketInvoices->currentPage() == $ticketInvoices->lastPage() ? 'disabled' : '' }}">
                    <a href="?page={{ $ticketInvoices->lastPage() }}" class="page-link">Cuối trang</a>
                </li>
            </ul>
        </nav>
    @endif
</div>
